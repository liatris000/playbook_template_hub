# B型支援CRM 立ち上げドキュメントセット

このドキュメントは、新規作成予定の B型支援CRM（問い合わせから成約まで）を立ち上げる際に、最初に用意するべき文書を整理したものです。  
前提として、成約後の管理は既存 B型支援SaaS 側で行います。

## ゴール

- 問い合わせから成約までの業務を CRM で一貫管理できる
- 成約時に既存 SaaS へ安全に引き継げる
- 後戻りしやすい要件漏れ（ステータス遷移、重複登録、連携失敗）を初期で潰す

## 最初に作るべきドキュメント（必須）

<!-- markdownlint-disable MD013 -->
| 優先 | ドキュメント | 目的 |
|---|---|---|
| P0 | `requirements-template.md` を基にした要件定義 | 問い合わせ -> 成約の業務要件を確定 |
| P0 | `crm-to-saas-handoff-spec-template.md` を基にした連携仕様 | 成約後のSaaS引き継ぎ契約を確定 |
| P0 | RLS/権限設計書（`../../core/security/supabase-rls-template.md` 参照） | 個人情報アクセス境界を確定 |
| P1 | API 契約書（一覧/詳細/更新/成約） | フロント・バック間の契約固定 |
| P1 | データモデル定義（lead, activity, appointment など） | 先にテーブル責務を固定 |
| P1 | 運用Runbook（障害時/連携失敗時） | 失敗時の対応統一 |
<!-- markdownlint-enable MD013 -->

## 推奨ドキュメント（早期に追加）

| 優先 | ドキュメント | 目的 |
|---|---|---|
| P2 | KPI 定義書（CV率、滞留日数、成約率） | 改善サイクルの指標固定 |
| P2 | 用語集（問い合わせ種別、成約定義） | チーム間の言葉のズレ防止 |
| P2 | 監査ログ方針 | 個人情報変更履歴の追跡 |

## 初期スプリントでの実施順

1. 要件定義とステータス遷移を確定する
2. 成約イベントと引き継ぎ契約を先に確定する
3. RLS とロール境界を確定する
4. API/DB を実装し、失敗系テストを先に作る
5. 連携失敗時の再送・重複防止を検証する

## 注意点（今回の前提）

- 既存案件は業務テンプレの参考とし、ドメインルールは流用しない
- 新規 CRM の正本は新リポジトリ側で管理する
- 既存 B型支援SaaS との連携は「契約（Schema）」を正本にする
